<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Change Item</title>
    <link href="libs/5.3.2_dist_css_bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="libs/5.3.2_dist_js_bootstrap.bundle.min.js"
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
            crossorigin="anonymous"></script>
    <script src="libs/jquery-3.7.1.min.js"></script>
    <script src="SendData.js"></script>
</head>
<body>

<div class="row g-3">
    <div class="input-group mb-3 col">
        <span class="input-group-text" >Name</span>
        <input type="text" id="name" class="form-control" placeholder="Product Name" aria-label="label" aria-describedby="desc">
    </div>
    <div class="input-group mb-3 col">
        <span class="input-group-text">bon_name</span>
        <input type="text" id="bon_name" class="form-control" maxlength="17" placeholder="Kurtz name für den Bon" aria-label="label" aria-describedby="desc">
    </div>
</div>
<div class="row g-3">
    <div class="input-group mb-3 col">
        <span class="input-group-text">cnt</span>
        <input type="number" id="cnt" class="form-control" placeholder="Wie viele haben wir?" aria-label="label" aria-describedby="desc">
    </div>
    <div class="input-group mb-3 col">
        <span class="input-group-text">min_cnt</span>
        <input type="number" id="min_cnt" class="form-control" placeholder="Wie Viele sollten wir immer da Haben?" aria-label="label" aria-describedby="desc">
    </div>

</div>

<div class="input-group mb-3">
    <span class="input-group-text">price</span>
    <input type="text" id="price" class="form-control" placeholder="Preis inclusive MWsT" aria-label="label" aria-describedby="desc">
    <span class="input-group-text">€</span>
</div>


<div class="input-group mb-3">
    <span class="input-group-text">manufacturer</span>
    <input type="text" id="manufacturer" class="form-control" placeholder="Hersteller" aria-label="label" aria-describedby="desc">
</div>
<div class="input-group mb-3">
    <span class="input-group-text">size</span>
    <input type="text" id="size" class="form-control" placeholder="Größe" aria-label="label" aria-describedby="desc">
</div>

<div class="input-group mb-3">
    <span class="input-group-text">color</span>
    <input type="text" id="color" class="form-control" placeholder="Farbe" aria-label="label" aria-describedby="desc">
</div>


<div class="input-group mb-3">
    <span class="input-group-text">details</span>
    <textarea id="details" class="form-control" aria-label="With textarea"></textarea>
</div>



<button class="btn btn-primary" onclick="UpdateItem()">Update</button>


<script>
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get("id")

    let name = $('#name');
    let cnt = $('#cnt');
    let price = $('#price');
    let manufacturer = $('#manufacturer')
    let color = $('#color');
    let min_cnt =$('#min_cnt');
    let details =$('#details');
    let size =$('#size');
    let bon_name =$('#bon_name');

    httpGetAsync(ServerAddress + "/itemById" + "?id=" + id, InitData)
    let Data = {}
    function InitData(data){
        //Fill in the defaults
        Data = JSON.parse(data)

        name.val(Data["name"]);
        cnt.val(Data["cnt"]);
        price.val(Data["price"]);
        manufacturer.val(Data["manufacturer"]);
        color.val(Data["color"]);
        min_cnt.val(Data["min_cnt"]);
        details.val(Data["details"]);
        size.val(Data["size"]);
        bon_name.val(Data["bon_name"]);
    }

    function UpdateItem(){
        Data["name"] = name.val();
        Data["cnt"] = cnt.val();
        Data["price"] = price.val();
        Data["manufacturer"] = manufacturer.val();
        Data["color"] = color.val();
        Data["min_cnt"] = min_cnt.val();
        Data["details"] = details.val();
        Data["size"] = size.val();
        Data["bon_name"] = bon_name.val();

        PostJson(Data,ServerAddress + "/UpdateItem");

    }

</script>

</body>
</html>